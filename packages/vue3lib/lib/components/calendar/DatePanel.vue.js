"use strict";const e=require("vue"),b=require("../../node_modules/dayjs/dayjs.min.js");require("D:/own/game/packages/vue3lib/src/components/calendar/DatePanel.vue?vue&type=style&index=0&scoped=00f02a65&lang.css");const R=require("../../_virtual/_plugin-vue_export-helper.js"),N={class:"date-panel-container"},C={class:"calendar-table"},F={class:"calendar-thead"},S={class:"calendar-item"},q={class:"calendar-tbody"},L={class:"tbody-wrap"},O=["onClick","onMouseover"],v=6,x={__name:"DatePanel",props:{sevenDay:{type:Array,default:()=>["日","一","二","三","四","五","六"]},showDate:{type:Object,default:()=>({year:2024,month:5})}},setup(f){const p=f,{sevenDay:h,showDate:i}=e.toRefs(p),s=e.computed(()=>({year:i.value.year,month:i.value.month-1})),{range:D,format:y,calendarChange:_,onSelectDateRange:g}=e.inject("rootAttr"),d=t=>({year:t.year(),month:t.month(),date:t.date(),value:t.format(y.value),dayjs:t,grey:t.month()!==s.value.month}),o=e.ref([]);e.watch(D,t=>{const r=t.map(a=>d(a));o.value=r},{immediate:!0});const k=e.computed(()=>{const t=new Date(s.value.year,s.value.month);return b(t).startOf("month").startOf("week")}),E=e.computed(()=>Array(v*7).fill(0).map((t,n)=>{const r=k.value.add(n,"day");return d(r)})),B=t=>{if(c.value.length!==2)return!1;const n=new Date(t),r=c.value[0],a=c.value[1];return n>=r&&n<=a},c=e.computed(()=>{const t=[];if(l.value[0]){const n=new Date(l.value[0].value);t.push(n)}if(l.value[1]){const n=new Date(l.value[1].value);t.push(n)}return t}),l=e.computed(()=>{let t=null;if(o.value.length<2)t=o.value;else{const n=o.value[0],r=o.value[1],a=new Date(n.value),m=new Date(r.value);a>m?t=[o.value[1],o.value[0]]:t=o.value}return u&&(g(t),u=!1),_(t),t});let u=!1;const V=t=>{u=!0,o.value.length<2?o.value.push(t):o.value=[t]},w=t=>{};return(t,n)=>(e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("table",C,[e.createElementVNode("thead",F,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(h),(r,a)=>(e.openBlock(),e.createElementBlock("th",{key:a},[e.createElementVNode("div",S,e.toDisplayString(r),1)]))),128))])]),e.createElementVNode("tbody",q,[e.createElementVNode("div",L,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(v,r=>e.createElementVNode("tr",{key:r},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(E).slice((r-1)*7,(r-1)*7+7),a=>(e.openBlock(),e.createElementBlock("td",{key:a.value,class:e.normalizeClass(["cell",{"cell--in-range":B(a.value),"cell--start-item":e.unref(l)[0]&&a.value===e.unref(l)[0].value,"cell--end-item":e.unref(l)[1]&&a.value===e.unref(l)[1].value}])},[e.createElementVNode("div",{class:e.normalizeClass(["calendar-item tbody-item",{"tbody-item--grey":a.grey,"tbody-item--start":e.unref(l)[0]&&a.value===e.unref(l)[0].value,"tbody-item--end":e.unref(l)[1]&&a.value===e.unref(l)[1].value}]),onClick:m=>V(a),onMouseover:m=>w()},e.toDisplayString(a.date),43,O)],2))),128))])),64))])])])]))}},A=R(x,[["__scopeId","data-v-00f02a65"]]);module.exports=A;
