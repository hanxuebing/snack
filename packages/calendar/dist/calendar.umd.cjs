(function(Y,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(Y=typeof globalThis<"u"?globalThis:Y||self,e(Y.calendar={},Y.Vue))})(this,function(Y,e){"use strict";const X=(f,w=null)=>{if(f.install=i=>{for(const $ of[f,...Object.values(w??{})])i.component($.name,$)},w)for(const[i,$]of Object.entries(w))f[i]=$;return f},se=(f=[])=>({install:i=>{console.log(f),f.forEach($=>i.use($))}});var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ce(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ee={exports:{}};(function(f,w){(function(i,$){f.exports=$()})(oe,function(){var i=1e3,$=6e4,p=36e5,S="millisecond",D="second",b="minute",m="hour",l="day",d="week",C="month",W="quarter",B="year",R="date",x="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],t=s%100;return"["+s+(r[(t-20)%10]||r[t]||r[0])+"]"}},u=function(s,r,t){var a=String(s);return!a||a.length>=r?s:""+Array(r+1-a.length).join(t)+s},E={s:u,z:function(s){var r=-s.utcOffset(),t=Math.abs(r),a=Math.floor(t/60),n=t%60;return(r<=0?"+":"-")+u(a,2,"0")+":"+u(n,2,"0")},m:function s(r,t){if(r.date()<t.date())return-s(t,r);var a=12*(t.year()-r.year())+(t.month()-r.month()),n=r.clone().add(a,C),o=t-n<0,c=r.clone().add(a+(o?-1:1),C);return+(-(a+(t-n)/(o?n-c:c-n))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:C,y:B,w:d,d:l,D:R,h:m,m:b,s:D,ms:S,Q:W}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},M="en",_={};_[M]=Q;var H="$isDayjsObject",K=function(s){return s instanceof J||!(!s||!s[H])},U=function s(r,t,a){var n;if(!r)return M;if(typeof r=="string"){var o=r.toLowerCase();_[o]&&(n=o),t&&(_[o]=t,n=o);var c=r.split("-");if(!n&&c.length>1)return s(c[0])}else{var y=r.name;_[y]=r,n=y}return!a&&n&&(M=n),n||!a&&M},v=function(s,r){if(K(s))return s.clone();var t=typeof r=="object"?r:{};return t.date=s,t.args=arguments,new J(t)},h=E;h.l=U,h.i=K,h.w=function(s,r){return v(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var J=function(){function s(t){this.$L=U(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[H]=!0}var r=s.prototype;return r.parse=function(t){this.$d=function(a){var n=a.date,o=a.utc;if(n===null)return new Date(NaN);if(h.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var c=n.match(A);if(c){var y=c[2]-1||0,g=(c[7]||"0").substring(0,3);return o?new Date(Date.UTC(c[1],y,c[3]||1,c[4]||0,c[5]||0,c[6]||0,g)):new Date(c[1],y,c[3]||1,c[4]||0,c[5]||0,c[6]||0,g)}}return new Date(n)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return h},r.isValid=function(){return this.$d.toString()!==x},r.isSame=function(t,a){var n=v(t);return this.startOf(a)<=n&&n<=this.endOf(a)},r.isAfter=function(t,a){return v(t)<this.startOf(a)},r.isBefore=function(t,a){return this.endOf(a)<v(t)},r.$g=function(t,a,n){return h.u(t)?this[a]:this.set(n,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,a){var n=this,o=!!h.u(a)||a,c=h.p(t),y=function(j,N){var P=h.w(n.$u?Date.UTC(n.$y,N,j):new Date(n.$y,N,j),n);return o?P:P.endOf(l)},g=function(j,N){return h.w(n.toDate()[j].apply(n.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(N)),n)},k=this.$W,O=this.$M,V=this.$D,I="set"+(this.$u?"UTC":"");switch(c){case B:return o?y(1,0):y(31,11);case C:return o?y(1,O):y(0,O+1);case d:var T=this.$locale().weekStart||0,F=(k<T?k+7:k)-T;return y(o?V-F:V+(6-F),O);case l:case R:return g(I+"Hours",0);case m:return g(I+"Minutes",1);case b:return g(I+"Seconds",2);case D:return g(I+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,a){var n,o=h.p(t),c="set"+(this.$u?"UTC":""),y=(n={},n[l]=c+"Date",n[R]=c+"Date",n[C]=c+"Month",n[B]=c+"FullYear",n[m]=c+"Hours",n[b]=c+"Minutes",n[D]=c+"Seconds",n[S]=c+"Milliseconds",n)[o],g=o===l?this.$D+(a-this.$W):a;if(o===C||o===B){var k=this.clone().set(R,1);k.$d[y](g),k.init(),this.$d=k.set(R,Math.min(this.$D,k.daysInMonth())).$d}else y&&this.$d[y](g);return this.init(),this},r.set=function(t,a){return this.clone().$set(t,a)},r.get=function(t){return this[h.p(t)]()},r.add=function(t,a){var n,o=this;t=Number(t);var c=h.p(a),y=function(O){var V=v(o);return h.w(V.date(V.date()+Math.round(O*t)),o)};if(c===C)return this.set(C,this.$M+t);if(c===B)return this.set(B,this.$y+t);if(c===l)return y(1);if(c===d)return y(7);var g=(n={},n[b]=$,n[m]=p,n[D]=i,n)[c]||1,k=this.$d.getTime()+t*g;return h.w(k,this)},r.subtract=function(t,a){return this.add(-1*t,a)},r.format=function(t){var a=this,n=this.$locale();if(!this.isValid())return n.invalidDate||x;var o=t||"YYYY-MM-DDTHH:mm:ssZ",c=h.z(this),y=this.$H,g=this.$m,k=this.$M,O=n.weekdays,V=n.months,I=n.meridiem,T=function(N,P,z,Z){return N&&(N[P]||N(a,o))||z[P].slice(0,Z)},F=function(N){return h.s(y%12||12,N,"0")},j=I||function(N,P,z){var Z=N<12?"AM":"PM";return z?Z.toLowerCase():Z};return o.replace(G,function(N,P){return P||function(z){switch(z){case"YY":return String(a.$y).slice(-2);case"YYYY":return h.s(a.$y,4,"0");case"M":return k+1;case"MM":return h.s(k+1,2,"0");case"MMM":return T(n.monthsShort,k,V,3);case"MMMM":return T(V,k);case"D":return a.$D;case"DD":return h.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return T(n.weekdaysMin,a.$W,O,2);case"ddd":return T(n.weekdaysShort,a.$W,O,3);case"dddd":return O[a.$W];case"H":return String(y);case"HH":return h.s(y,2,"0");case"h":return F(1);case"hh":return F(2);case"a":return j(y,g,!0);case"A":return j(y,g,!1);case"m":return String(g);case"mm":return h.s(g,2,"0");case"s":return String(a.$s);case"ss":return h.s(a.$s,2,"0");case"SSS":return h.s(a.$ms,3,"0");case"Z":return c}return null}(N)||c.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,a,n){var o,c=this,y=h.p(a),g=v(t),k=(g.utcOffset()-this.utcOffset())*$,O=this-g,V=function(){return h.m(c,g)};switch(y){case B:o=V()/12;break;case C:o=V();break;case W:o=V()/3;break;case d:o=(O-k)/6048e5;break;case l:o=(O-k)/864e5;break;case m:o=O/p;break;case b:o=O/$;break;case D:o=O/i;break;default:o=O}return n?o:h.a(o)},r.daysInMonth=function(){return this.endOf(C).$D},r.$locale=function(){return _[this.$L]},r.locale=function(t,a){if(!t)return this.$L;var n=this.clone(),o=U(t,a,!0);return o&&(n.$L=o),n},r.clone=function(){return h.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s}(),ae=J.prototype;return v.prototype=ae,[["$ms",S],["$s",D],["$m",b],["$H",m],["$W",l],["$M",C],["$y",B],["$D",R]].forEach(function(s){ae[s[1]]=function(r){return this.$g(r,s[0],s[1])}}),v.extend=function(s,r){return s.$i||(s(r,J,v),s.$i=!0),v},v.locale=U,v.isDayjs=K,v.unix=function(s){return v(1e3*s)},v.en=_[M],v.Ls=_,v.p={},v})})(ee);var ie=ee.exports;const L=ce(ie);function le(f){return L(f)}const ue={class:"control-switcher-container"},de={__name:"ControlSwitcher",props:{currentDateString:{type:String,default:""}},emits:["prev-year","prev-month","next-month","next-year"],setup(f,{emit:w}){const i=f,{currentDateString:$}=e.toRefs(i),p=w,S=()=>{p("prev-year")},D=()=>{p("prev-month")},b=()=>{p("next-month")},m=()=>{p("next-year")};return(l,d)=>(e.openBlock(),e.createElementBlock("div",ue,[e.createElementVNode("div",{class:"switcher"},[e.createElementVNode("div",{class:"switch-icon prev-y",onClick:S}),e.createElementVNode("div",{class:"switch-icon prev-m",onClick:D})]),e.createElementVNode("div",null,e.toDisplayString(e.unref($)),1),e.createElementVNode("div",{class:"switcher"},[e.createElementVNode("div",{class:"switch-icon next-m",onClick:b}),e.createElementVNode("div",{class:"switch-icon next-y",onClick:m})])]))}},q=(f,w)=>{const i=f.__vccOpts||f;for(const[$,p]of w)i[$]=p;return i},fe={class:"date-panel-container"},he={class:"calendar-table"},me={class:"calendar-thead"},pe={class:"calendar-item"},ye={class:"calendar-tbody"},$e={class:"tbody-wrap"},_e=["onClick","onMouseover"],te=6,ge=q({__name:"DatePanel",props:{sevenDay:{type:Array,default:()=>["日","一","二","三","四","五","六"]},showDate:{type:Object,default:()=>({year:2024,month:5})}},setup(f){const w=f,{sevenDay:i,showDate:$}=e.toRefs(w),p=e.computed(()=>({year:$.value.year,month:$.value.month-1})),{range:S,format:D,calendarChange:b,onSelectDateRange:m}=e.inject("rootAttr"),l=u=>({year:u.year(),month:u.month(),date:u.date(),value:u.format(D.value),dayjs:u,grey:u.month()!==p.value.month}),d=e.ref([]);e.watch(S,u=>{const M=u.map(_=>l(_));d.value=M},{immediate:!0});const C=e.computed(()=>{const u=new Date(p.value.year,p.value.month);return L(u).startOf("month").startOf("week")}),W=e.computed(()=>Array(te*7).fill(0).map((u,E)=>{const M=C.value.add(E,"day");return l(M)})),B=u=>{if(R.value.length!==2)return!1;const E=new Date(u),M=R.value[0],_=R.value[1];return E>=M&&E<=_},R=e.computed(()=>{const u=[];if(x.value[0]){const E=new Date(x.value[0].value);u.push(E)}if(x.value[1]){const E=new Date(x.value[1].value);u.push(E)}return u}),x=e.computed(()=>{let u=null;if(d.value.length<2)u=d.value;else{const E=d.value[0],M=d.value[1],_=new Date(E.value),H=new Date(M.value);_>H?u=[d.value[1],d.value[0]]:u=d.value}return A&&(m(u),A=!1),b(u),u});let A=!1;const G=u=>{A=!0,d.value.length<2?d.value.push(u):d.value=[u]},Q=u=>{};return(u,E)=>(e.openBlock(),e.createElementBlock("div",fe,[e.createElementVNode("table",he,[e.createElementVNode("thead",me,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(M,_)=>(e.openBlock(),e.createElementBlock("th",{key:_},[e.createElementVNode("div",pe,e.toDisplayString(M),1)]))),128))])]),e.createElementVNode("tbody",ye,[e.createElementVNode("div",$e,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(te,M=>e.createElementVNode("tr",{key:M},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(W).slice((M-1)*7,(M-1)*7+7),_=>(e.openBlock(),e.createElementBlock("td",{key:_.value,class:e.normalizeClass(["cell",{"cell--in-range":B(_.value),"cell--start-item":e.unref(x)[0]&&_.value===e.unref(x)[0].value,"cell--end-item":e.unref(x)[1]&&_.value===e.unref(x)[1].value}])},[e.createElementVNode("div",{class:e.normalizeClass(["calendar-item tbody-item",{"tbody-item--grey":_.grey,"tbody-item--start":e.unref(x)[0]&&_.value===e.unref(x)[0].value,"tbody-item--end":e.unref(x)[1]&&_.value===e.unref(x)[1].value}]),onClick:H=>G(_),onMouseover:H=>Q()},e.toDisplayString(_.date),43,_e)],2))),128))])),64))])])])]))}},[["__scopeId","data-v-e3e51d57"]]),De={class:"panel"},Me=q({__name:"panel",setup(f){const w=L(),i=e.ref({year:w.year(),month:w.month()+1}),$=e.computed(()=>{const m=i.value.year,l=i.value.month-1;return L(new Date(m,l)).format("YYYY-MM")}),p=()=>{i.value={year:i.value.year-1,month:i.value.month}},S=()=>{let m=i.value.month-1,l=i.value.year;m===0&&(m=12,l--),i.value={year:l,month:m}},D=()=>{let m=i.value.month+1,l=i.value.year;m===13&&(m=1,l++),i.value={year:l,month:m}},b=()=>{i.value={year:i.value.year+1,month:i.value.month}};return(m,l)=>(e.openBlock(),e.createElementBlock("div",De,[e.createVNode(de,{onPrevYear:p,onPrevMonth:S,onNextMonth:D,onNextYear:b,currentDateString:e.unref($)},null,8,["currentDateString"]),e.createVNode(ge,{showDate:e.unref(i)},null,8,["showDate"])]))}},[["__scopeId","data-v-a3d36bde"]]),we={class:"calendar-container"},ne=q({__name:"index",props:{format:{type:String,default:"YYYY-MM-DD"},range:{type:Array,default:()=>[]}},emits:["onSelectPeriod","onCalendarChange","onSelectDateRange"],setup(f,{emit:w}){const i=w,$=f,{format:p,range:S}=e.toRefs($),D=e.ref(),b=d=>d.map(C=>e.toRaw(C.dayjs)),m=d=>{i("onCalendarChange",b(d))},l=d=>{D.value&&D.value.resetStatus(),i("onSelectDateRange",b(d))};return e.provide("rootAttr",{range:S,format:p,calendarChange:m,onSelectDateRange:l}),(d,C)=>(e.openBlock(),e.createElementBlock("div",we,[e.renderSlot(d.$slots,"default",{},void 0,!0),e.createVNode(Me)]))}},[["__scopeId","data-v-482fe5a6"]]),Se={class:"date-period"},re={__name:"period",emits:["onSelectPeriod"],setup(f,{expose:w,emit:i}){const $=i,p=L(),S=e.ref(""),D=(m,l,d)=>{S.value=m,$("onSelectPeriod",m,[l,d])};return w({resetStatus:()=>{S.value=""}}),(m,l)=>(e.openBlock(),e.createElementBlock("div",Se,[e.createElementVNode("div",{class:e.normalizeClass(["period-btn",{selected:e.unref(S)==="近1周"}]),onClick:l[0]||(l[0]=d=>D("近1周",e.unref(p).subtract(7,"day"),e.unref(p)))},"近1周",2),e.createElementVNode("div",{class:e.normalizeClass(["period-btn",{selected:e.unref(S)==="近1月"}]),onClick:l[1]||(l[1]=d=>D("近1月",e.unref(p).subtract(1,"month"),e.unref(p)))},"近1月",2),e.createElementVNode("div",{class:e.normalizeClass(["period-btn",{selected:e.unref(S)==="近半年"}]),onClick:l[2]||(l[2]=d=>D("近半年",e.unref(p).subtract(6,"month"),e.unref(p)))},"近半年",2),e.createElementVNode("div",{class:e.normalizeClass(["period-btn",{selected:e.unref(S)==="近1年"}]),onClick:l[3]||(l[3]=d=>D("近1年",e.unref(p).subtract(1,"year"),e.unref(p)))},"近1年",2)]))}},ve=[X(ne),X(re)],ke=se(ve);Y.HCalendar=ne,Y.Period=re,Y.default=ke,Y.packing=le,Object.defineProperties(Y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
